<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino Roulette</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #1a1a1a; 
            color: white; 
            margin: 0; 
            padding: 10px; 
            text-align: center; 
            background: #0a0a0a url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==') repeat; 
        }
        #login { display: block; }
        #game { display: none; }
        #userInfo { margin: 10px 0; background: rgba(0, 0, 0, 0.7); padding: 10px; border-radius: 5px; }
        #wheel-container { 
            position: relative; 
            width: 300px; 
            height: 300px; 
            margin: 20px auto; 
            background: radial-gradient(circle at center, #d4a017 0%, #d4a017 10%, #4a2c00 10%, #4a2c00 100%); 
            border-radius: 50%; 
            box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.5), 0 0 10px rgba(0, 0, 0, 0.5); 
        }
        #wheel { 
            width: 100%; 
            height: 100%; 
            background: conic-gradient(
                #ff0000 0deg 9.73deg, #000000 9.73deg 18.46deg, #ff0000 18.46deg 27.19deg, #000000 27.19deg 35.92deg,
                #ff0000 35.92deg 44.65deg, #000000 44.65deg 53.38deg, #ff0000 53.38deg 62.11deg, #000000 62.11deg 70.84deg,
                #ff0000 70.84deg 79.57deg, #000000 79.57deg 88.3deg, #ff0000 88.3deg 97.03deg, #000000 97.03deg 105.76deg,
                #ff0000 105.76deg 114.49deg, #000000 114.49deg 123.22deg, #ff0000 123.22deg 131.95deg, #000000 131.95deg 140.68deg,
                #ff0000 140.68deg 149.41deg, #000000 149.41deg 158.14deg, #ff0000 158.14deg 166.87deg, #000000 166.87deg 175.6deg,
                #ff0000 175.6deg 184.33deg, #000000 184.33deg 193.06deg, #ff0000 193.06deg 201.79deg, #000000 201.79deg 210.52deg,
                #ff0000 210.52deg 219.25deg, #000000 219.25deg 227.98deg, #ff0000 227.98deg 236.71deg, #000000 236.71deg 245.44deg,
                #ff0000 245.44deg 254.17deg, #000000 254.17deg 262.9deg, #ff0000 262.9deg 271.63deg, #000000 271.63deg 280.36deg,
                #ff0000 280.36deg 289.09deg, #000000 289.09deg 297.82deg, #ff0000 297.82deg 306.55deg, #000000 306.55deg 315.28deg,
                #ff0000 315.28deg 324.01deg, #000000 324.01deg 332.74deg, #ff0000 332.74deg 341.47deg, #000000 341.47deg 350.2deg,
                #00ff00 350.2deg 360deg
            ); 
            border-radius: 50%; 
            position: absolute; 
            top: 0; 
            left: 0; 
            transition: transform 4s ease-out; 
            clip-path: polygon(0% 50%, 100% 50%, 100% 100%, 0% 100%);
        }
        #wheel::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ffd700;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }
        #wheel::after {
            content: '';
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #ffd700 0%, #d4a017 70%, #4a2c00 100%);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
        }
        #ball { 
            width: 15px; 
            height: 15px; 
            background: white; 
            border-radius: 50%; 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            display: none; 
            box-shadow: 0 0 10px white; 
        }
        .landing-spot { 
            width: 20px; 
            height: 20px; 
            background: transparent; 
            position: absolute; 
            border: 2px dashed rgba(255, 255, 255, 0.3); 
            display: none; 
        }
        .roulette-table { 
            display: grid; 
            grid-template-columns: repeat(12, 1fr); 
            gap: 2px; 
            max-width: 800px; 
            margin: 20px auto; 
            background: #006400; 
            padding: 10px; 
            border-radius: 10px; 
        }
        .number { background: #444; padding: 10px; cursor: pointer; transition: all 0.3s; font-weight: bold; }
        .red { background: #ff4444; }
        .black { background: #000; color: white; }
        .green { background: #00cc00; }
        .bet-option { background: #555; padding: 10px; cursor: pointer; transition: all 0.3s; }
        .bet-option:hover, .number:hover { background: #777; transform: scale(1.1); }
        #chips { display: flex; justify-content: center; gap: 10px; margin: 10px 0; }
        .chip { padding: 10px 20px; background: #ffd700; color: black; border-radius: 50%; cursor: pointer; transition: all 0.3s; box-shadow: 0 0 5px #ffd700; }
        .chip:hover { transform: scale(1.2); box-shadow: 0 0 10px #ffd700; }
        #resultBox { width: 100px; height: 50px; background: #ffd700; margin: 10px auto; line-height: 50px; font-size: 20px; border-radius: 5px; animation: blink 1s infinite; }
        #betInfo { margin: 10px 0; background: rgba(0, 0, 0, 0.7); padding: 10px; border-radius: 5px; }
        #totalBet { font-weight: bold; color: #ffd700; }
        @media (max-width: 600px) { #wheel-container { width: 150px; height: 150px; } .roulette-table { grid-template-columns: repeat(6, 1fr); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(3600deg); } }
        @keyframes ballSpin { 
            0% { transform: translate(-50%, -50%) rotate(0deg); opacity: 1; } 
            70% { transform: translate(-50%, -50%) rotate(2520deg); opacity: 0.8; } 
            90% { transform: translate(-60%, -60%) rotate(3240deg); opacity: 0.6; } 
            100% { transform: translate(-120%, -120%) rotate(3600deg); opacity: 0; } 
        }
        @keyframes ballBounce { 
            0% { transform: translate(-120%, -120%) scale(1); opacity: 0; } 
            20% { transform: translate(-110%, -110%) scale(1.2); opacity: 0.8; } 
            40% { transform: translate(-115%, -115%) scale(0.9); opacity: 1; } 
            60% { transform: translate(-112%, -112%) scale(1.1); opacity: 0.9; } 
            80% { transform: translate(-114%, -114%) scale(1); opacity: 1; } 
            100% { transform: translate(-114%, -114%) scale(1); opacity: 1; } 
        }
        @keyframes blink { 50% { opacity: 0.5; } }
        @keyframes fadeInOut { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <div id="login">
        <h1>Casino Roulette</h1>
        <input type="text" id="phone" placeholder="ဖုန်းနံပါတ်">
        <input type="password" id="pin" placeholder="PIN">
        <button onclick="login()">အကောင့်ဖွင့်</button>
    </div>
    <div id="game">
        <div id="userInfo">
            <p>UserID: <span id="userId">...</span></p>
            <p>Phone: <span id="userPhone">...</span></p>
            <p>Play Time: <span id="playTime">...</span></p>
            <p>Balance: <span id="balance">0 ကျပ်</span></p>
            <button id="logoutBtn">Log Out</button>
            <button onclick="openUserInfo()">User Info</button>
        </div>
        <h2>Game Time: <span id="gameTime">30</span> စက္ကန့်</h2>
        <div id="wheel-container">
            <div id="wheel">
                <div class="number-slot" style="transform: rotate(0deg);">0</div>
                <div class="number-slot" style="transform: rotate(9.73deg);">32</div>
                <div class="number-slot" style="transform: rotate(18.46deg);">15</div>
                <div class="number-slot" style="transform: rotate(27.19deg);">19</div>
                <div class="number-slot" style="transform: rotate(35.92deg);">4</div>
                <div class="number-slot" style="transform: rotate(44.65deg);">21</div>
                <div class="number-slot" style="transform: rotate(53.38deg);">2</div>
                <div class="number-slot" style="transform: rotate(62.11deg);">25</div>
                <div class="number-slot" style="transform: rotate(70.84deg);">17</div>
                <div class="number-slot" style="transform: rotate(79.57deg);">34</div>
                <div class="number-slot" style="transform: rotate(88.3deg);">6</div>
                <div class="number-slot" style="transform: rotate(97.03deg);">27</div>
                <div class="number-slot" style="transform: rotate(105.76deg);">13</div>
                <div class="number-slot" style="transform: rotate(114.49deg);">36</div>
                <div class="number-slot" style="transform: rotate(123.22deg);">11</div>
                <div class="number-slot" style="transform: rotate(131.95deg);">30</div>
                <div class="number-slot" style="transform: rotate(140.68deg);">8</div>
                <div class="number-slot" style="transform: rotate(149.41deg);">23</div>
                <div class="number-slot" style="transform: rotate(158.14deg);">10</div>
                <div class="number-slot" style="transform: rotate(166.87deg);">5</div>
                <div class="number-slot" style="transform: rotate(175.6deg);">24</div>
                <div class="number-slot" style="transform: rotate(184.33deg);">16</div>
                <div class="number-slot" style="transform: rotate(193.06deg);">33</div>
                <div class="number-slot" style="transform: rotate(201.79deg);">1</div>
                <div class="number-slot" style="transform: rotate(210.52deg);">20</div>
                <div class="number-slot" style="transform: rotate(219.25deg);">14</div>
                <div class="number-slot" style="transform: rotate(227.98deg);">31</div>
                <div class="number-slot" style="transform: rotate(236.71deg);">9</div>
                <div class="number-slot" style="transform: rotate(245.44deg);">22</div>
                <div class="number-slot" style="transform: rotate(254.17deg);">18</div>
                <div class="number-slot" style="transform: rotate(262.9deg);">29</div>
                <div class="number-slot" style="transform: rotate(271.63deg);">7</div>
                <div class="number-slot" style="transform: rotate(280.36deg);">28</div>
                <div class="number-slot" style="transform: rotate(289.09deg);">12</div>
                <div class="number-slot" style="transform: rotate(297.82deg);">35</div>
                <div class="number-slot" style="transform: rotate(306.55deg);">3</div>
                <div class="number-slot" style="transform: rotate(315.28deg);">26</div>
                <div class="number-slot" style="transform: rotate(324.01deg);">0</div>
                <div class="number-slot" style="transform: rotate(332.74deg);">32</div>
                <div class="number-slot" style="transform: rotate(341.47deg);">15</div>
            </div>
            <div id="ball"></div>
            <div id="landingSpot" class="landing-spot"></div>
        </div>
        <div class="roulette-table">
            <div class="green number" data-value="0">0</div>
            <div class="red number" data-value="1">1</div>
            <div class="black number" data-value="2">2</div>
            <div class="red number" data-value="3">3</div>
            <div class="black number" data-value="4">4</div>
            <div class="red number" data-value="5">5</div>
            <div class="black number" data-value="6">6</div>
            <div class="red number" data-value="7">7</div>
            <div class="black number" data-value="8">8</div>
            <div class="red number" data-value="9">9</div>
            <div class="black number" data-value="10">10</div>
            <div class="black number" data-value="11">11</div>
            <div class="red number" data-value="12">12</div>
            <div class="red number" data-value="13">13</div>
            <div class="black number" data-value="14">14</div>
            <div class="red number" data-value="15">15</div>
            <div class="black number" data-value="16">16</div>
            <div class="red number" data-value="17">17</div>
            <div class="black number" data-value="18">18</div>
            <div class="red number" data-value="19">19</div>
            <div class="black number" data-value="20">20</div>
            <div class="red number" data-value="21">21</div>
            <div class="black number" data-value="22">22</div>
            <div class="red number" data-value="23">23</div>
            <div class="black number" data-value="24">24</div>
            <div class="red number" data-value="25">25</div>
            <div class="black number" data-value="26">26</div>
            <div class="red number" data-value="27">27</div>
            <div class="black number" data-value="28">28</div>
            <div class="black number" data-value="29">29</div>
            <div class="red number" data-value="30">30</div>
            <div class="black number" data-value="31">31</div>
            <div class="red number" data-value="32">32</div>
            <div class="black number" data-value="33">33</div>
            <div class="red number" data-value="34">34</div>
            <div class="black number" data-value="35">35</div>
            <div class="red number" data-value="36">36</div>
            <div class="bet-option" data-value="1st12">1st 12</div>
            <div class="bet-option" data-value="2nd12">2nd 12</div>
            <div class="bet-option" data-value="3rd12">3rd 12</div>
            <div class="bet-option" data-value="1to18">1 to 18</div>
            <div class="bet-option" data-value="even">Even</div>
            <div class="bet-option" data-value="red">Red</div>
            <div class="bet-option" data-value="black">Black</div>
            <div class="bet-option" data-value="odd">Odd</div>
            <div class="bet-option" data-value="19to36">19 to 36</div>
        </div>
        <div id="chips">
            <div class="chip" onclick="selectChip(1000)">1K</div>
            <div class="chip" onclick="selectChip(5000)">5K</div>
            <div class="chip" onclick="selectChip(10000)">10K</div>
            <div class="chip" onclick="selectChip(50000)">50K</div>
            <div class="chip" onclick="selectChip(100000)">100K</div>
            <div class="chip" onclick="selectChip(1000000)">1M</div>
        </div>
        <div id="resultBox">...</div>
        <div id="betInfo">
            <p>Current Bet: <span id="currentBet">0 ကျပ်</span></p>
            <p>Total Bet: <span id="totalBet">0 ကျပ်</span></p>
        </div>
    </div>
    <div id="serverMsg" style="display: none; color: red; font-size: 24px; animation: fadeInOut 2s infinite;">Server ခနစောင့်ပါ...</div>
    <script>
        let users = JSON.parse(localStorage.getItem('users')) || {};
        let currentUser = null;
        let currentBets = [];
        let selectedChip = 0;
        let gameTime = 30;
        let gameActive = false;
        let adminPassword = "admin123";
        let landingAngle = 0;

        function login() {
            const phone = document.getElementById('phone').value;
            const pin = document.getElementById('pin').value;
            if (!users[phone]) {
                users[phone] = {
                    pin: pin,
                    balance: 0,
                    playTime: 0,
                    bets: [],
                    history: [],
                    gameId: `User${phone.slice(-4)}`,
                    createdDate: new Date().toLocaleDateString(),
                    lastActivity: new Date().toISOString()
                };
                localStorage.setItem('users', JSON.stringify(users));
            }
            if (users[phone].pin === pin) {
                currentUser = phone;
                document.getElementById('login').style.display = 'none';
                document.getElementById('game').style.display = 'block';
                updateUserInfo();
                if (gameActive) startGame();
                playBackgroundMusic();
                updateUserActivity('Logged in');
            } else {
                alert('PIN မမှန်ပါ');
            }
        }

        function updateUserInfo() {
            if (currentUser) {
                document.getElementById('userId').innerText = users[currentUser].gameId;
                document.getElementById('userPhone').innerText = currentUser;
                document.getElementById('balance').innerText = `${users[currentUser].balance} ကျပ်`;
                users[currentUser].playTime += 1;
                users[currentUser].lastActivity = new Date().toISOString();
                updateBetInfo();
                localStorage.setItem('users', JSON.stringify(users));
                window.postMessage({ type: 'updateUserInfo', phone: currentUser }, '*');
            }
        }

        function updateUserActivity(activity) {
            if (currentUser) {
                users[currentUser].history.push({ date: new Date().toISOString(), activity: activity });
                localStorage.setItem('users', JSON.stringify(users));
                window.postMessage({ type: 'updateUserInfo', phone: currentUser }, '*');
            }
        }

        function selectChip(amount) {
            selectedChip = amount;
            updateUserActivity(`Selected chip: ${amount} ကျပ်`);
            alert(`ရွေးထားသော ချစ်ပ်: ${amount} ကျပ်`);
        }

        function placeBet(type) {
            if (!selectedChip || !gameActive || users[currentUser].balance < selectedChip) return;
            const bet = { type: type, amount: selectedChip, user: currentUser };
            currentBets.push(bet);
            users[currentUser].balance -= selectedChip;
            updateUserActivity(`Placed bet: ${type} with ${selectedChip} ကျပ်`);
            updateUserInfo();
            updateBetDisplay(type, selectedChip);
        }

        function updateBetDisplay(type, amount) {
            const betElement = document.querySelector(`[data-value="${type}"]`);
            if (betElement) {
                betElement.style.background = `linear-gradient(to top, #ffd700, #ffd700 ${amount / 10000}%, ${betElement.classList.contains('red') ? '#ff4444' : betElement.classList.contains('black') ? '#000' : '#00cc00'} ${amount / 10000}%)`;
                betElement.setAttribute('data-bet', amount);
            }
            document.getElementById('currentBet').innerText = `${currentBets.reduce((sum, bet) => sum + bet.amount, 0)} ကျပ်`;
        }

        function startGame() {
            gameActive = true;
            document.getElementById('serverMsg').style.display = 'none';
            let time = setInterval(() => {
                gameTime--;
                document.getElementById('gameTime').innerText = gameTime;
                if (gameTime <= 0) {
                    clearInterval(time);
                    spinWheel();
                    gameTime = 30;
                }
            }, 1000);
            updateUserActivity('Game started');
        }

        function spinWheel() {
            const wheel = document.getElementById('wheel');
            const ball = document.getElementById('ball');
            const landingSpot = document.getElementById('landingSpot');
            ball.style.display = 'block';
            let result = Math.floor(Math.random() * 37);
            landingAngle = (result * 9.73) + (Math.random() * 10 - 5);
            wheel.style.transform = `rotate(${landingAngle}deg)`;
            ball.style.animation = 'ballSpin 4s ease-out forwards';
            setTimeout(() => {
                ball.style.animation = 'ballBounce 1s ease-out forwards';
                landingSpot.style.display = 'block';
                landingSpot.style.transform = `rotate(${landingAngle}deg) translateX(120px)`;
                setTimeout(() => {
                    wheel.style.transition = '';
                    ball.style.animation = '';
                    ball.style.display = 'none';
                    landingSpot.style.display = 'none';
                    document.getElementById('resultBox').innerText = result;
                    calculatePayout(result);
                    gameActive = false;
                    setTimeout(() => startGame(), 2000);
                }, 1000);
            }, 4000);
            updateUserActivity(`Wheel spun, result: ${result}`);
            let spinSound = new Audio('data:audio/mpeg;base64,//uQRAA...'); // Replace with base64 encoded spin sound
            spinSound.play();
        }

        function calculatePayout(result) {
            let payout = 0;
            let allBets = [];
            Object.keys(users).forEach(user => {
                users[user].bets.forEach(bet => allBets.push(bet));
            });
            allBets.forEach(bet => {
                if (bet.type === result.toString()) payout += bet.amount * 35;
                else if (bet.type === 'red' && [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(result)) payout += bet.amount * 1;
                else if (bet.type === 'black' && ![1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(result) && result !== 0) payout += bet.amount * 1;
                else if (bet.type === 'odd' && result % 2 === 1 && result !== 0) payout += bet.amount * 1;
                else if (bet.type === 'even' && result % 2 === 0 && result !== 0) payout += bet.amount * 1;
                else if (bet.type === '1to18' && result <= 18 && result !== 0) payout += bet.amount * 1;
                else if (bet.type === '19to36' && result >= 19) payout += bet.amount * 1;
                else if (bet.type === '1st12' && result >= 1 && result <= 12) payout += bet.amount * 2;
                else if (bet.type === '2nd12' && result >= 13 && result <= 24) payout += bet.amount * 2;
                else if (bet.type === '3rd12' && result >= 25 && result <= 36) payout += bet.amount * 2;
            });
            Object.keys(users).forEach(user => {
                let userPayout = 0;
                users[user].bets.forEach(bet => {
                    if (bet.type === result.toString()) userPayout += bet.amount * 35;
                    else if (bet.type === 'red' && [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(result)) userPayout += bet.amount * 1;
                    else if (bet.type === 'black' && ![1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(result) && result !== 0) userPayout += bet.amount * 1;
                    else if (bet.type === 'odd' && result % 2 === 1 && result !== 0) userPayout += bet.amount * 1;
                    else if (bet.type === 'even' && result % 2 === 0 && result !== 0) userPayout += bet.amount * 1;
                    else if (bet.type === '1to18' && result <= 18 && result !== 0) userPayout += bet.amount * 1;
                    else if (bet.type === '19to36' && result >= 19) userPayout += bet.amount * 1;
                    else if (bet.type === '1st12' && result >= 1 && result <= 12) userPayout += bet.amount * 2;
                    else if (bet.type === '2nd12' && result >= 13 && result <= 24) userPayout += bet.amount * 2;
                    else if (bet.type === '3rd12' && result >= 25 && result <= 36) userPayout += bet.amount * 2;
                });
                if (userPayout > 0) {
                    users[user].balance += userPayout + users[user].bets.reduce((sum, bet) => sum + bet.amount, 0);
                    users[user].history.push({ date: new Date().toISOString(), activity: `Won: ${userPayout} ကျပ်, Result: ${result}` });
                    if (user === currentUser) alert(`အနိုင်ရရှိပါတယ်! ရလဒ်: ${result}, ရရှိသောပမာဏ: ${userPayout} ကျပ်`);
                } else {
                    users[user].history.push({ date: new Date().toISOString(), activity: `Lost: ${users[user].bets.reduce((sum, bet) => sum + bet.amount, 0)} ကျပ်, Result: ${result}` });
                    if (user === currentUser) alert(`ရှုံးသွားပါပြီ! ရလဒ်: ${result}`);
                }
                users[user].bets = [];
                updateUserInfo();
            });
            document.getElementById('totalBet').innerText = `${allBets.reduce((sum, bet) => sum + bet.amount, 0)} ကျပ်`;
            localStorage.setItem('users', JSON.stringify(users));
        }

        function logout() {
            updateUserActivity('Logged out');
            currentUser = null;
            document.getElementById('game').style.display = 'none';
            document.getElementById('login').style.display = 'block';
            stopBackgroundMusic();
        }

        function openUserInfo() {
            window.open('userinfo.html', '_blank');
        }

        function playBackgroundMusic() {
            let bgMusic = new Audio('data:audio/mpeg;base64,//uQRAA...'); // Replace with base64 encoded casino background music
            bgMusic.loop = true;
            bgMusic.volume = 0.3;
            bgMusic.play();
        }

        function stopBackgroundMusic() {
            let bgMusic = document.querySelector('audio');
            if (bgMusic) bgMusic.pause();
        }

        window.addEventListener('message', (event) => {
            if (event.data.type === 'startGame' && event.data.password === adminPassword) {
                gameActive = true;
                startGame();
            } else if (event.data.type === 'stopGame' && event.data.password === adminPassword) {
                gameActive = false;
                document.getElementById('serverMsg').style.display = 'block';
                clearInterval(window.gameTimer);
            } else if (event.data.type === 'updateBalance' && event.data.phone === currentUser) {
                users[currentUser].balance = event.data.balance;
                updateUserInfo();
            } else if (event.data.type === 'syncTime') {
                gameTime = event.data.time;
                document.getElementById('gameTime').innerText = gameTime;
            }
        });
    </script>
    <style>
        .number-slot {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            line-height: 300px;
            font-size: 14px;
            color: white;
            transform-origin: center;
            clip-path: polygon(0% 50%, 100% 50%, 100% 100%, 0% 100%);
        }
    </style>
</body>
</html>
